<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->

<head>
  <meta charset="utf-8">
  <title>Spock-Reports for Grails 2.5 - R.D.Müller - Bits from my Brain</title>
  <meta name="author" content="Ralf D. Müller">
  
  
  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="canonical" href="https://rdmueller.github.io/blog/2015/07/16/spock-reports-for-grails-2-5/">
  <link href="/images/favicon-eec3051d5c356d1798bea1d8a3617c51.png" rel="icon">
  <link href="/stylesheets/screen-212a3205d97b53ef71581e910c98f79c.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="atom.xml" rel="alternate" title="R.D.Müller - Bits from my Brain" type="application/atom+xml">
  
    <script src="/javascripts/libs/jquery.min-663628f795cb62444143fde1ebdf2b5b.js" type="text/javascript"></script>
  
    <script src="/javascripts/modernizr-2.0-f86b862d5ee138da61daf47f24116ed7.js" type="text/javascript"></script>
  
    <script src="/javascripts/octopress-52bd0860c81b8af484852d75380d38f3.js" type="text/javascript"></script>
  
    <script src="/javascripts/github-2c23ec60bbc7e962f6324b25d8b2ae44.js" type="text/javascript"></script>
  
    <script src="/javascripts/jquery.tweet-408e79928ca077df30b72fe36df5754e.js" type="text/javascript"></script>
  
    <script src="/javascripts/twitter-options-5e0a859802705e93583ec7d344aa7239.js" type="text/javascript"></script>
  
  

  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

</head>


<body 
   >
  <header role="banner"><hgroup>
  <h1><a href="/">R.D.Müller - Bits from my Brain</a></h1>
  
    <h2>making the software-world a better place one document at a time</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss ">
  <li><a href="https://rdmueller.github.io/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>

  <form action="http://google.com/search" method="get">
    <fieldset role="search">
      <input type="hidden" name="q" value="site:rdmueller@github.io" />
      <input class="search" type="text" name="q" placeholder="Search"/>
    </fieldset>
  </form>

<ul class="main-navigation">
  
    <li><a href="/">Blog</a></li>
  
    <li><a href="/archives/">Archives</a></li>
  
    <li><a href="/pages/about/">About</a></li>
  
</ul>

</nav>
  <div id="main">
    <div id="content">
      
<div class="blog-index">
<article class="hentry" role="article">
  <article>

  <header>
    
      <h1 class="entry-title">Spock-Reports for Grails 2.5</h1>
    
    
      <p class="meta">
        


    <time datetime="2015-07-16T12:00:00+02:00" pubdate data-updated=true>
      <span class="month">Jul</span>
      <span class="day">16</span>,
      <span class="year">2015</span>
    </time>
  


        
      </p>
    
  </header>


<div class="entry-content"><p>In two previous posts (<a href="https://rdmueller.github.io/Spock-Reports-with-Grails-3.0/">Grails3.0</a> &amp; <a href="https://rdmueller.github.io/Spock-Reports-with-Grails-2.2/">Grails2.2</a>) I described how to use <a href="https://github.com/renatoathaydes/spock-reports">Spock-Reports</a> with <a href="http://www.grails.org">Grails 3.0</a> and Grails 2.2.<!--more--></p>
<p>Now, if you try to use it with Grails 2.5, it seems not to work from the start. The main problem I noticed was that even
when I run a trivial app and all spock tests are auto-created, I got an error message at the end of the tests:
http://stackoverflow.com/questions/31440381/forked-grails-vm-exited-with-error-while-running-test-app#comment50863764_31440381</p>
<p>So I tried to get rid of this error message by not forking the VM when running tests. To do that, simply set the fork-configuration
to <code>false</code> for the test environments (in <code>BuildConfig.groovy</code>)</p>
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='groovy'><span class='line'><span class="n">grails</span><span class="o">.</span><span class="na">project</span><span class="o">.</span><span class="na">fork</span> <span class="o">=</span> <span class="o">[</span>
</span><span class='line'>    <span class="o">...</span>
</span><span class='line'>    <span class="nl">test:</span> <span class="kc">false</span><span class="o">,</span>
</span><span class='line'>    <span class="o">...</span>
</span><span class='line'><span class="o">]</span>
</span></code></pre></td></tr></table></div></figure>
<p>Now, the rest seems to work the same as with Grails 2.2.4 with the only difference that Grails 2.5 uses Spock out of the box.
So we don't habe to configure it:</p>
<p>just open your <code>grails-app/conf/BuildConfig.groovy</code> file and add</p>
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='groovy'><span class='line'><span class="n">repositories</span> <span class="o">{</span>
</span><span class='line'>  <span class="o">[...]</span>
</span><span class='line'>  <span class="c1">//for spock-reports</span>
</span><span class='line'>  <span class="n">mavenRepo</span> <span class="s2">&quot;http://jcenter.bintray.com&quot;</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>
<p>to the <code>repositories</code> section and</p>
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='groovy'><span class='line'><span class="n">dependencies</span> <span class="o">{</span>
</span><span class='line'>  <span class="o">[...]</span>
</span><span class='line'>  <span class="c1">//for spock-reports</span>
</span><span class='line'>  <span class="n">test</span> <span class="s1">&#39;com.athaydes:spock-reports:1.2.5&#39;</span>  
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>
<p>to the <code>dependencies</code> section.</p>
<p>The standard reports are now generated and stored in <code>build/spock-reports/.</code>.</p>
<h3>Customizing your Reports</h3>
<p>In order to store the generated reports in <code>target/test-reports/spock/.</code> you have to customize your reports as described in the <a href="https://github.com/renatoathaydes/spock-reports#customizing-the-reports">documentation</a>, you have to create a file called <code>META-INF/services/com.athaydes.spockframework.report.IReportCreator.properties</code>.
That sounds easier than it is, because it has to be in the classpath and for some Grails projects, it's not easy to find the right folder to put it.</p>
<p>For Grails 2.5, you will succeed by putting it in <code>grails-app/conf/META-INF/services/com.athaydes.spockframework.report.IReportCreator.properties</code>.</p>
<p>Here is a sample file which uses the template based reports:</p>
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='groovy'><span class='line'><span class="err">#</span> <span class="n">Name</span> <span class="n">of</span> <span class="n">the</span> <span class="n">implementation</span> <span class="kd">class</span> <span class="nc">of</span> <span class="n">the</span> <span class="n">report</span> <span class="n">creator</span>
</span><span class='line'><span class="err">#</span> <span class="n">Currently</span> <span class="n">supported</span> <span class="n">classes</span> <span class="nl">are:</span>
</span><span class='line'><span class="err">#</span>   <span class="mi">1</span><span class="o">.</span> <span class="n">com</span><span class="o">.</span><span class="na">athaydes</span><span class="o">.</span><span class="na">spockframework</span><span class="o">.</span><span class="na">report</span><span class="o">.</span><span class="na">internal</span><span class="o">.</span><span class="na">HtmlReportCreator</span>
</span><span class='line'><span class="err">#</span>   <span class="mi">2</span><span class="o">.</span> <span class="n">com</span><span class="o">.</span><span class="na">athaydes</span><span class="o">.</span><span class="na">spockframework</span><span class="o">.</span><span class="na">report</span><span class="o">.</span><span class="na">template</span><span class="o">.</span><span class="na">TemplateReportCreator</span>
</span><span class='line'><span class="n">com</span><span class="o">.</span><span class="na">athaydes</span><span class="o">.</span><span class="na">spockframework</span><span class="o">.</span><span class="na">report</span><span class="o">.</span><span class="na">IReportCreator</span><span class="o">=</span><span class="n">com</span><span class="o">.</span><span class="na">athaydes</span><span class="o">.</span><span class="na">spockframework</span><span class="o">.</span><span class="na">report</span><span class="o">.</span><span class="na">template</span><span class="o">.</span><span class="na">TemplateReportCreator</span>
</span><span class='line'>
</span><span class='line'><span class="err">#</span> <span class="n">Output</span> <span class="n">directory</span> <span class="o">(</span><span class="n">where</span> <span class="n">the</span> <span class="n">spock</span> <span class="n">reports</span> <span class="n">will</span> <span class="n">be</span> <span class="n">created</span><span class="o">)</span> <span class="o">-</span> <span class="n">relative</span> <span class="n">to</span> <span class="n">working</span> <span class="n">directory</span>
</span><span class='line'><span class="n">com</span><span class="o">.</span><span class="na">athaydes</span><span class="o">.</span><span class="na">spockframework</span><span class="o">.</span><span class="na">report</span><span class="o">.</span><span class="na">outputDir</span><span class="o">=</span><span class="n">target</span><span class="s">/test-reports/</span><span class="n">spock</span>
</span><span class='line'>
</span><span class='line'><span class="err">#</span> <span class="n">If</span> <span class="n">set</span> <span class="n">to</span> <span class="kc">true</span><span class="o">,</span> <span class="n">hides</span> <span class="n">blocks</span> <span class="n">which</span> <span class="k">do</span> <span class="n">not</span> <span class="n">have</span> <span class="n">any</span> <span class="n">description</span>
</span><span class='line'><span class="n">com</span><span class="o">.</span><span class="na">athaydes</span><span class="o">.</span><span class="na">spockframework</span><span class="o">.</span><span class="na">report</span><span class="o">.</span><span class="na">hideEmptyBlocks</span><span class="o">=</span><span class="kc">false</span>
</span><span class='line'>
</span><span class='line'><span class="err">#</span> <span class="n">Set</span> <span class="n">properties</span> <span class="n">of</span> <span class="n">the</span> <span class="n">report</span> <span class="n">creator</span>
</span><span class='line'><span class="n">com</span><span class="o">.</span><span class="na">athaydes</span><span class="o">.</span><span class="na">spockframework</span><span class="o">.</span><span class="na">report</span><span class="o">.</span><span class="na">template</span><span class="o">.</span><span class="na">TemplateReportCreator</span><span class="o">.</span><span class="na">specTemplateFile</span><span class="o">=</span><span class="s">/spockreporttemplate/</span><span class="n">spec</span><span class="o">-</span><span class="n">template</span><span class="o">.</span><span class="na">md</span>
</span><span class='line'><span class="n">com</span><span class="o">.</span><span class="na">athaydes</span><span class="o">.</span><span class="na">spockframework</span><span class="o">.</span><span class="na">report</span><span class="o">.</span><span class="na">template</span><span class="o">.</span><span class="na">TemplateReportCreator</span><span class="o">.</span><span class="na">reportFileExtension</span><span class="o">=</span><span class="n">md</span>
</span><span class='line'><span class="n">com</span><span class="o">.</span><span class="na">athaydes</span><span class="o">.</span><span class="na">spockframework</span><span class="o">.</span><span class="na">report</span><span class="o">.</span><span class="na">template</span><span class="o">.</span><span class="na">TemplateReportCreator</span><span class="o">.</span><span class="na">summaryTemplateFile</span><span class="o">=</span><span class="s">/spockreporttemplate/</span><span class="n">summary</span><span class="o">-</span><span class="n">template</span><span class="o">.</span><span class="na">md</span>
</span><span class='line'><span class="n">com</span><span class="o">.</span><span class="na">athaydes</span><span class="o">.</span><span class="na">spockframework</span><span class="o">.</span><span class="na">report</span><span class="o">.</span><span class="na">template</span><span class="o">.</span><span class="na">TemplateReportCreator</span><span class="o">.</span><span class="na">summaryFileName</span><span class="o">=</span><span class="n">summary</span><span class="o">.</span><span class="na">md</span>
</span></code></pre></td></tr></table></div></figure>
<p>this file specifies that the templates are located in <code>grails-app/conf/spockreporttemplates</code> and the output
will be written to <code>target/test-reports/spock</code>. A good idea is to start with the default templates <a href="https://github.com/renatoathaydes/spock-reports/blob/master/src/main/resources/templateReportCreator/spec-template.md">spec-template.md</a> and <a href="https://github.com/renatoathaydes/spock-reports/blob/master/src/main/resources/templateReportCreator/summary-template.md">summary-template.md</a></p>
<p>You might want to use this https://github.com/rdmueller/Grails2.5-Spock-Reports-Sample as a starting point...</p>
</div>

</article>

  <footer>
    <p class="meta">
      

  <span class="byline author vcard">Posted by <a href="/authors/ralf-d-muller/"><span class="fn">Ralf D. Müller</span></a></span>


      




     <time datetime="2016-06-27T20:29:01+02:00" class="updated">
       Updated
       <span class="month">Jun</span>
       <span class="day">27</span>,
       <span class="year">2016</span>
     </time>

      
<div class="categories">
  <p class="meta">Tags:</p>
  
     <a class="category" href="/categories/spock/">spock</a>
  
     <a class="category" href="/categories/grails/">grails</a>
  
</div>


    </p>
    
      <div class="sharing">
  
    <a href="https://twitter.com/share" class="twitter-share-button" data-url="/blog/2015/07/16/spock-reports-for-grails-2-5/" data-via="RalfDMueller" data-counturl="/blog/2015/07/16/spock-reports-for-grails-2-5/" data-lang="en">Tweet</a>
  
  
    <div class="g-plusone" data-size="medium"></div>
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2015/08/14/domain-class-diagrams-for-grails-projects/" title="Previous Post: Domain Class Diagrams for Grails Projects">&laquo; Domain Class Diagrams for Grails Projects</a>
      
      
        <a class="basic-alignment right" href="/blog/2015/07/14/spock-reports-for-grails-2-2/" title="Next Post: Spock-Reports for Grails 2.2">Spock-Reports for Grails 2.2 &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    
<section>
  <h1>About Me</h1>
  <p>Groovy & Grails Developer, Solution Architect, arc42 enthusiast.</p>
</section>


  
    <section>
    <a href="https://stackexchange.com/users/70694"><img src="https://stackexchange.com/users/flair/70694.png" width="208" height="58" alt="profile for Ralf on Stack Exchange, a network of free, community-driven Q&amp;A sites" title="profile for Ralf on Stack Exchange, a network of free, community-driven Q&amp;A sites"></a>
</section>
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2016/06/26/why-you-should-use-asciidoc-to-document-your-software-solution/">Why You Should Use AsciiDoc to Document Your Software Solution</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/05/16/why-i-don-t-like-word-to-write-documentation/">Why I Don't Like Word to Write Documentation</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/05/09/groovy-is-java-is-groovy/">Groovy Is Java Is Groovy...</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/04/30/a-groovy-notebook/">A Groovy Notebook</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/04/28/wacom-bamboo-spark-could-have-been-so-much-more/">Wacom Bamboo Spark - Could Have Been So Much More...</a>
      </li>
    
  </ul>
</section>

  
    
<section>
    <!-- Latest Tweets -->
    <h1>My Tweets</h1>

    <div class="tweet query footer"><!-- Tweets Code --></div>

    <!-- Twitter Follow Button which allows users to follow a Twitter account -->
    
    <a href="https://twitter.com/RalfDMueller"
       class="twitter-follow-button"
       data-show-screen-name="true"
       data-show-count="true"
       data-lang="en"
       data-size="large">
        Follow @RalfDMueller
    </a>
    <script>!function (d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (!d.getElementById(id)) {
            js = d.createElement(s);
            js.id = id;
            js.src = "http://platform.twitter.com/widgets.js";
            fjs.parentNode.insertBefore(js, fjs);
        }
    }(document, "script", "twitter-wjs");
    </script>
    

</section>


  
    
<section>
  <h1>GitHub Repos</h1>
  
  
    <a href="https://github.com/RDMueller">RDMueller</a> on GitHub
  
  
</section>


  
</aside>



    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2016 - Ralf D. Müller -
  <span class="credit">Powered by <a href="http://sysgears.com/grain/">Grain</a></span>
</p>

</footer>
  <!-- Load script if disquss comments are enabled and `page.comments` is either empty (index) or set to true -->



  <div id="fb-root"></div>
  <script>
    (function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) {return;}
      js = d.createElement(s); js.id = id; js.async = true;
      js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
      fjs.parentNode.insertBefore(js, fjs);
      }(document, 'script', 'facebook-jssdk'));
  </script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>


<!-- Place your javascript or css declarations here so that they will be placed after footer -->


</body>

</html>
